{"version":3,"sources":["components/buttons/KeyButton.js","util/appUtil.js","util/constantsUtil.js","actions/actionTypes.js","actions/actionCreators.js","reducers/reducers.js","sagas/application/checkMasterCode.js","sagas/index.js","store.js","components/SafeKeyboard.js","components/Locking.js","components/Status.js","components/SafeDisplay.js","containers/HotelSafe.js","App.js","index.js"],"names":["KeyButton","props","react_default","a","createElement","type","className","value","keyNumber","onClick","onKeyClick","onMouseUp","event","onDelayedCallback","serialNumber","sn","passwordExists","localStorage","getItem","servicePassEntered","enteredPass","validan","length","i","setPassword","setItem","join","validatePassword","validPass","JSON","parse","numbers","CHECK_MASTER_CODE","SUBMIT_PASSCODE","SERVICE_MODE","MASTER_CODE_CONFIRMED","IS_VALIDATING","IS_LOADING","TOGGLE_LOCK","submitPasscodeAction","valid","locking","enterServiceMode","status","isLoading","loading","toggleLock","reducer","state","arguments","undefined","action","unlocked","Object","objectSpread","masterCodeValid","validating","checkMasterCode","myEndPoint","responseApi","serNum","resNum","checkMasterCodeApi","_checkMasterCodeApi","regenerator_default","wrap","_context2","prev","next","asyncToGenerator","mark","_callee","_context","axios","get","masterCode","sent","Error","abrupt","stop","apply","this","put","_marked","watchLoadTradesRequest","sagas","takeEvery","sagas_marked","all","_marked2","middlewares","sagaMiddleware","createSagaMiddleware","push","middleware","applyMiddleware","store","createStore","run","SafeKeyboard","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","passcode","bind","assertThisInitialized","delayedCallback","_","debounce","submitPasscode","persist","_this2","dispatch","setState","setTimeout","keyValue","_this3","concat","toConsumableArray","_this4","buttons","map","number","index","key","Component","connect","ownProps","myStore","getState","Locking","isUnlocked","Status","SafeDisplay","_this$props","isIdle","classes","HotelSafe","components_SafeDisplay","components_SafeKeyboard","App","idleTimer","onAction","_onAction","onActive","_onActive","onIdle","_onIdle","isAppIdle","e","document","addEventListener","removeEventListener","keyCode","console","log","handleKeyPress","index_es","ref","element","timeout","es","HotelSafe_HotelSafe","ReactDOM","render","BrowserRouter_default","basename","process","src_App","getElementById"],"mappings":"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","file":"static/js/main.78071e2b.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport default function KeyButton(props){\r\n  return (\r\n    <input \r\n      type='button' \r\n      className='keyButton'\r\n      value={props.keyNumber}\r\n      onClick={()=>{props.onKeyClick(props.keyNumber)}} \r\n      onMouseUp={(event)=>{props.onDelayedCallback(event)}}>           \r\n    </input>\r\n  );\r\n}\r\n\r\n","\r\nexport const serialNumber = {sn: 4815162342}\r\n\r\nexport const passwordExists = () => {\r\n    let pass = localStorage.getItem('password')\r\n    if(pass) {\r\n        return true;\r\n    }else return false\r\n}\r\n\r\nexport const servicePassEntered = (enteredPass) => {\r\n    let validPass = '000000'\r\n    let validan = false;\r\n    if(enteredPass.length === validPass.length) {\r\n        for (let i = 0; i < enteredPass.length; i++) {\r\n            if (enteredPass[i] === validPass[i]) {\r\n                validan = true\r\n            } else {\r\n                validan = false\r\n                break;\r\n            }\r\n\r\n        }\r\n    }\r\n    if(validan) return true\r\n    else return false\r\n}\r\n\r\nexport const setPassword = (enteredPass) => {\r\n    if(enteredPass.length === 6) {\r\n        localStorage.setItem('password', enteredPass.join(''));\r\n        return true;\r\n    }else return false;\r\n}\r\n\r\nexport const validatePassword = (enteredPass) =>{\r\n    let password = JSON.parse(localStorage.getItem('password'))\r\n    let validPass = password+''\r\n    let validan = false;\r\n\r\n    if(validPass.length === enteredPass.length) {\r\n        for (let i = 0; i < enteredPass.length; i++) {\r\n            if (enteredPass[i] === validPass[i]) {\r\n                validan = true\r\n            } else {\r\n                validan = false\r\n                break;\r\n            }\r\n\r\n        }\r\n    }\r\n    if(validan) return true\r\n    else return false\r\n}\r\n\r\nexport function handleKeyPress(event) {\r\n    switch(event.keyCode){\r\n      case 49: \r\n      return 1\r\n\r\n      case 50: \r\n      return 2\r\n\r\n      case 51:\r\n      return 3\r\n\r\n      case 52:\r\n      return 4\r\n\r\n      case 53: \r\n      return 5\r\n\r\n      case 54: \r\n      return 6\r\n      \r\n      case 55:\r\n      return 7\r\n      \r\n      case 56:\r\n      return 8\r\n      \r\n      case 57: \r\n      return 9\r\n      \r\n      case 48: \r\n      return 0\r\n      \r\n      case 106:\r\n      return '*'\r\n      \r\n      case 76:\r\n      return 'L'\r\n          \r\n      case 13:\r\n      return 'ENTER'\r\n      \r\n      default: \r\n      console.log('Not a valid key pressed')\r\n\r\n    }\r\n  }\r\n","export const REST_ROOT_ENDPOINT = 'http://localhost/3000'\r\nexport const numbers = ['1','2','3','4','5','6','7','8','9','*','0','L']\r\n","export const CHECK_MASTER_CODE = 'CHECK_MASTER_CODE'\r\nexport const SUBMIT_PASSCODE = 'SUBMIT_PASSCODE'\r\nexport const SERVICE_MODE = 'SERVICE_MODE'\r\nexport const MASTER_CODE_CONFIRMED = 'MASTER_CODE_CONFIRMED'\r\nexport const IS_VALIDATING = 'IS_VALIDATING'\r\nexport const IS_LOADING = 'IS_LOADING'\r\nexport const TOGGLE_LOCK = 'TOGGLE_LOCK'\r\nexport const SET_SERIAL_NUMBER = 'SET_SERIAL_NUMBER'","import {SUBMIT_PASSCODE, CHECK_MASTER_CODE, SERVICE_MODE, IS_LOADING, IS_VALIDATING, TOGGLE_LOCK, SET_SERIAL_NUMBER} from './actionTypes'\r\n\r\nexport function submitPasscodeAction(valid, locking) {\r\n    return {\r\n      type: SUBMIT_PASSCODE,\r\n      valid,\r\n      locking\r\n    }\r\n  }\r\n\r\nexport function checkMasterCode(masterCode, serialNumber) {\r\n    return {\r\n      type: CHECK_MASTER_CODE,\r\n        masterCode,\r\n        serialNumber\r\n    }\r\n  }\r\n\r\nexport function enterServiceMode(status) {\r\n    return {\r\n      type: SERVICE_MODE,\r\n      status\r\n    }\r\n  }\r\n\r\nexport function isLoading(loading){\r\n  return {\r\n    type: IS_LOADING,\r\n    loading\r\n  }\r\n}\r\n  \r\nexport function toggleLock(valid, status){\r\n  return {\r\n    type: TOGGLE_LOCK,\r\n    valid,\r\n    status\r\n  }\r\n}\r\n\r\nexport function isValidating(validating){\r\n  return {\r\n    type: IS_VALIDATING,\r\n    validating\r\n  }\r\n} \r\n\r\nexport function setSerialNumber(){\r\n  return {\r\n    type: SET_SERIAL_NUMBER\r\n  }\r\n}","import {SUBMIT_PASSCODE, MASTER_CODE_CONFIRMED, SERVICE_MODE, IS_LOADING, TOGGLE_LOCK, IS_VALIDATING} from '../actions/actionTypes'\r\n\r\nconst reducer = (state = {}, action) => {\r\n    switch (action.type) {\r\n        case SUBMIT_PASSCODE: \r\n        let unlocked = action.valid\r\n        let status = (!action.valid && action.locking!=='LOCKING') ? 'Error' : 'Ready'\r\n        return {...state, unlocked, status}\r\n\r\n        case SERVICE_MODE :\r\n        status = action.status\r\n        return {...state, status}\r\n\r\n        case TOGGLE_LOCK:\r\n        unlocked = action.valid\r\n        status = action.status\r\n        return {...state, unlocked, status}\r\n  \r\n        case MASTER_CODE_CONFIRMED : \r\n        unlocked = action.masterCodeValid ? true : false\r\n        status = action.masterCodeValid ? 'Ready' : 'Error'\r\n        return {...state, unlocked, status}\r\n\r\n        case IS_LOADING :\r\n        status = action.loading\r\n        return {...state, status}\r\n\r\n        case IS_VALIDATING :\r\n        status = action.validating ? 'Validating' : status\r\n        return {...state, status}\r\n\r\n        default: return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import {put} from 'redux-saga/effects'\r\nimport {MASTER_CODE_CONFIRMED} from '../../actions/actionTypes'\r\nimport axios from 'axios'\r\nconst myEndPoint = 'https://9w4qucosgf.execute-api.eu-central-1.amazonaws.com/default/CR-JS_team_M02a'\r\n\r\nexport function* checkMasterCode(action){\r\n    \r\n    let responseApi = yield checkMasterCodeApi(action.masterCode)\r\n\r\n    let serNum = action.serialNumber.sn\r\n    let resNum = responseApi.sn\r\n    \r\n    if(serNum == resNum){\r\n        //Master code was confirmed and action was dispatched to change the display state\r\n        yield put({type: MASTER_CODE_CONFIRMED, masterCodeValid: true})\r\n    }else{\r\n        // Master code not valid and action was dispatched to change the display state\r\n        yield put({type: MASTER_CODE_CONFIRMED, masterCodeValid: false})\r\n    }\r\n\r\n    async function checkMasterCodeApi(){\r\n        let response = await axios.get(myEndPoint+'?code='+action.masterCode)\r\n        if(response.status === 200){   \r\n        // console.log(\"Response \",response)\r\n        }else{\r\n            throw new Error();\r\n        }\r\n        return {sn: 4815162342}\r\n    }\r\n\r\n}\r\n","import {takeEvery, all} from \"redux-saga/effects\";\r\nimport {checkMasterCode} from \"./application/checkMasterCode\";\r\n\r\nfunction* watchLoadTradesRequest() {    \r\n    yield takeEvery('CHECK_MASTER_CODE', checkMasterCode);\r\n}\r\n\r\nexport function* sagas() {\r\n    yield all ([\r\n        watchLoadTradesRequest()\r\n    ])\r\n}","import reducer from './reducers/reducers'\r\nimport {createStore, applyMiddleware} from 'redux'\r\nimport createSagaMiddleware from \"redux-saga\";\r\nimport {sagas} from \"./sagas/index\";\r\n\r\nlet middlewares = [];\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\nmiddlewares.push(sagaMiddleware)\r\n\r\nlet middleware = applyMiddleware(...middlewares);\r\n\r\nexport const store = createStore(reducer, middleware);\r\nsagaMiddleware.run(sagas)","import React, { Component } from 'react';\r\nimport KeyButton from './buttons/KeyButton'\r\nimport {validatePassword, passwordExists, setPassword, servicePassEntered, serialNumber} from '../util/appUtil'\r\nimport {numbers} from '../util/constantsUtil'\r\nimport _ from 'lodash';\r\nimport {connect} from 'react-redux'\r\nimport {submitPasscodeAction, checkMasterCode, enterServiceMode, isLoading, toggleLock} from '../actions/actionCreators'\r\nimport { store } from '../store'\r\n\r\nclass SafeKeyboard extends Component {\r\n  \r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      passcode: []\r\n    }\r\n    this.onKeyClick = this.onKeyClick.bind(this)\r\n    this.onDelayedCallback = this.onDelayedCallback.bind(this)\r\n    this.delayedCallback = _.debounce(this.submitPasscode, 2000)\r\n    this.submitPasscode = this.submitPasscode.bind(this)\r\n  }\r\n \r\n  onDelayedCallback (event){\r\n      event.persist()\r\n      this.delayedCallback(event)\r\n  }\r\n\r\n  submitPasscode(){\r\n    if(this.state.passcode && this.state.passcode.length>0){\r\n    //If it is in service mode, dispatch validating\r\n    if(servicePassEntered(this.state.passcode)){\r\n      // this.props.dispatch(isValidating('Validation'))\r\n      this.props.dispatch(enterServiceMode('Service'))\r\n      this.setState({passcode: []})\r\n      return;\r\n    } \r\n    else if(this.props.status !== 'Service') {\r\n      this.props.dispatch(isLoading('Unlocking'))\r\n    }\r\n    setTimeout(()=>{\r\n      if(this.props.status === 'Service'){    \r\n        this.props.dispatch(checkMasterCode(this.state.passcode, serialNumber))\r\n        this.setState({passcode: []}) \r\n      }\r\n      else{\r\n        if(this.state.passcode.length>0){   \r\n          if(servicePassEntered(this.state.passcode)){\r\n              this.props.dispatch(enterServiceMode('Service'))\r\n          }else{\r\n              if(!passwordExists()){\r\n                if(setPassword(this.state.passcode)){\r\n                    setTimeout((this.props.dispatch(toggleLock(true, 'Ready'))), 3000)\r\n                }else {\r\n                    setTimeout((this.props.dispatch(toggleLock(false, 'Error'))), 3000)\r\n                }\r\n              }else{\r\n                if(validatePassword(this.state.passcode)){\r\n                  this.props.dispatch(submitPasscodeAction(true))\r\n                }else {\r\n                  this.props.dispatch(submitPasscodeAction(false))\r\n                }\r\n              }\r\n          }\r\n        }\r\n      }\r\n      this.setState({passcode: []})   \r\n    }, 3000)}\r\n  }\r\n\r\n  onKeyClick (keyValue){\r\n    if(keyValue==='L' && this.props.status !== 'Service'){      \r\n      this.props.dispatch(isLoading('Locking'))\r\n      setTimeout(()=>{this.props.dispatch(toggleLock(false, 'Ready'))}, 3000)\r\n      this.setState({passcode: []})\r\n    }else{\r\n    this.setState({passcode: [...this.state.passcode, keyValue]})\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const buttons = numbers.map((number, index) => \r\n      <KeyButton \r\n        key={index} \r\n        keyNumber={number} \r\n        onKeyClick={this.onKeyClick}\r\n        onDelayedCallback={this.onDelayedCallback}\r\n        />\r\n        )\r\n\r\n    return (\r\n      <div className='safeKeyboard'>\r\n        {buttons}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state, ownProps) {\r\n  let myStore = store.getState();\r\n  return {\r\n    status: myStore.status ? myStore.status : 'Ready'\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(SafeKeyboard);\r\n","import React from 'react';\r\n\r\nexport default function Locking (props) {\r\n  \r\n  return (\r\n    <div className=\"locking\">\r\n      {props.isUnlocked ?\r\n        <p>UNLOCKED</p> :\r\n        <p>LOCKED</p>\r\n      }\r\n    </div>\r\n  );  \r\n}","import React from 'react';\r\n\r\nexport default function Status (props) { \r\n  return (\r\n    <div className='status'>\r\n      <p>{props.status}</p>       \r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { store } from '../store'\r\nimport Locking from './Locking'\r\nimport Status from './Status'\r\n\r\nclass SafeDisplay extends Component {\r\n  render() {\r\n    const {isIdle, isUnlocked, status} = this.props\r\n    let classes = isIdle ? 'safeDisplay backlightIdle' : 'safeDisplay'\r\n\r\n    return (\r\n      <div className={classes}>\r\n        <Locking isUnlocked={isUnlocked}/>\r\n        <Status status={status}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps() {\r\n  let myStore = store.getState();\r\n  return {\r\n    isUnlocked: myStore.unlocked,\r\n    status: myStore.status ? myStore.status : 'Ready'\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(SafeDisplay);\r\n","import React, { Component } from 'react';\r\nimport SafeKeyboard from '../components/SafeKeyboard'\r\nimport SafeDisplay from '../components/SafeDisplay'\r\nimport {serialNumber} from '../util/appUtil'\r\n\r\nexport default class HotelSafe extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className='hotelSafe'>\r\n        <SafeDisplay isIdle={this.props.isIdle}/>\r\n        <SafeKeyboard/>\r\n        <div className='serialNumber'>\r\n          {\"S/N: \"+serialNumber.sn}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport './css/main.css';\r\nimport HotelSafe from './containers/HotelSafe';\r\nimport {Provider} from 'react-redux'\r\nimport {store} from './store'\r\nimport IdleTimer from 'react-idle-timer'\r\nimport {validatePassword, passwordExists, setPassword, servicePassEntered, handleKeyPress} from './util/appUtil'\r\n\r\nclass App extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.idleTimer = null\r\n    this.onAction = this._onAction.bind(this)\r\n    this.onActive = this._onActive.bind(this)\r\n    this.onIdle = this._onIdle.bind(this)    \r\n    this.onKeyClick = this.onKeyClick.bind(this)\r\n    this.submitPasscode = this.submitPasscode.bind(this)\r\n    this.state={\r\n      isAppIdle: false,\r\n      passcode: []\r\n    }\r\n  }\r\n\r\n  _onAction(e) {}\r\n \r\n  _onActive(e) {\r\n    this.setState({isAppIdle: false})\r\n  }\r\n \r\n  _onIdle(e) {\r\n    this.setState({isAppIdle: true})\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this.onKeyClick);\r\n  }\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this.onKeyClick);\r\n  }\r\n\r\n  onKeyClick (event){\r\n    let keyValue = handleKeyPress(event)\r\n    if(keyValue==='ENTER'){\r\n      this.submitPasscode(this.state.passcode, 'nbt')\r\n    }else\r\n    this.setState({passcode: [...this.state.passcode, keyValue]})\r\n  }\r\n\r\n  submitPasscode(){\r\n  \r\n    if(servicePassEntered(this.state.passcode)){\r\n        // this.props.dispatch(enterServiceMode('Service'))\r\n    }else{\r\n    if(!passwordExists()){\r\n      setPassword(this.state.passcode)\r\n    }else{\r\n    if(validatePassword(this.state.passcode)){\r\n      // this.props.dispatch(submitPasscodeAction(true))\r\n    }else {\r\n      // this.props.dispatch(submitPasscodeAction(false))\r\n    }\r\n  }}\r\n    this.setState({passcode: []})\r\n  }\r\n\r\n \r\n  render() {\r\n    return (\r\n      <div className=\"application\">\r\n        <IdleTimer\r\n            ref={ref => { this.idleTimer = ref }}\r\n            element={document}\r\n            onActive={this.onActive}\r\n            onIdle={this.onIdle}\r\n            onAction={this.onAction}\r\n            debounce={250}\r\n            timeout={5000} />\r\n        <Provider store={store}>\r\n          <HotelSafe isIdle={this.state.isAppIdle}/>\r\n        </Provider>        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport BrowserRouter from 'react-router-dom/BrowserRouter'\r\n\r\nReactDOM.render(\r\n<BrowserRouter basename={process.env.PUBLIC_URL}>\r\n<App />\r\n</BrowserRouter>, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}